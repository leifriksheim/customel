var Customel=function(){"use strict";const t={attrs(t){const e={};for(let s=0;s<t.attributes.length;s++){const i=t.attributes[s];e[i.name]=i.value}return e},nodesByKey(t,e){const s={};for(let i=0;i<t.childNodes.length;i++){const n=e(t.childNodes[i]);n&&(s[n]=t.childNodes[i])}return s},merge(t,e,s){if((s=s||{}).key=s.key||(t=>t.id),"string"==typeof e){const s=e;(e=document.createElement(t.tagName)).innerHTML=s}const i={old:this.nodesByKey(t,s.key),new:this.nodesByKey(e,s.key)};let n;for(n=0;e.firstChild;n++){const r=e.removeChild(e.firstChild);if(n>=t.childNodes.length){t.appendChild(r);continue}let o=t.childNodes[n];const h=s.key(r);if(s.key(o)||h){const e=h&&h in i.old?i.old[h]:r;e!==o&&(o=t.insertBefore(e,o))}if(o.nodeType!==r.nodeType||o.tagName!==r.tagName)t.replaceChild(r,o);else if([Node.TEXT_NODE,Node.COMMENT_NODE].indexOf(o.nodeType)>=0){if(o.textContent===r.textContent)continue;o.textContent=r.textContent}else if(o!==r){const t={base:this.attrs(o),new:this.attrs(r)};for(const e in t.base)e in t.new||o.removeAttribute(e);for(const e in t.new)e in t.base&&t.base[e]===t.new[e]||o.setAttribute(e,t.new[e]);this.merge(o,r)}}for(;t.childNodes.length>n;)t.removeChild(t.lastChild)}},e=[];for(const t in document){const s=null===document[t]||"function"==typeof document[t];t.startsWith("on")&&s&&e.push(t.substring(2))}const s=[];function i(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}const n=/[^a-zA-Z0-9:]+/g;function r(t){return t.replace(/([a-z])([A-Z])/g,t=>t[0]+"-"+t[1]).replace(n,"-").toLowerCase()}function o(t,e){return"boolean"===e?"true"===t||""===t||!0===t:"number"===e?parseInt(t):"string"===e?String(t):t}function h(t,...e){return t.reduce((t,s,n)=>{if(!t.string)return{events:t.events,string:s};const r=e[n-1];if("function"===i(r)){const e=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);return{events:{...t.events,[e]:r},string:t.string+e+s}}if("array"===i(r)){const e=r.reduce((t,e)=>({...t,...e.events}),{}),i=r.reduce((t,e)=>t+e.string,"");return{events:{...t.events,...e},string:t.string+i+s}}return{events:{...t.events},string:t.string+e[n-1]+s}},{events:{},string:null})}return function({tag:c="my-element",mode:a="open",props:d={},define:p=!1,state:l={},actions:u={},mounted:b=(()=>{}),propChanged:g=(()=>{}),stateChanged:f=(()=>{}),render:m=(()=>{}),styles:y=(()=>"")}){class v extends HTMLElement{constructor(){super(),this.props={...d},this._propTypes={},this._initProps=this._initProps.bind(this),this.propChanged=g.bind(this),this._initProps(),this.state={...l},this.setState=this.setState.bind(this),this.stateChanged=f.bind(this),this._styles=y.bind(this),this.actions={...u},this._initActions=this._initActions.bind(this),this._initActions(),this._shadowRoot=this.attachShadow({mode:a}),this._html=h.bind(this),this._template=m.bind(this),this.render=this.render.bind(this),this.mounted=b.bind(this),this.emit=this.emit.bind(this)}_initProps(){Object.keys(this.props).map(t=>{const e=i(this.props[t]);this._propTypes[t]=e;const s=this.getAttribute(t)||this.hasAttribute(t)||this.props[t];this.props[t]=o(s,e)})}_initActions(){Object.keys(this.actions).map(t=>{this.actions[t]=u[t].bind(this)})}_upradeProperty(t){let e=this[t];delete this[t],this[t]=e}static get observedAttributes(){return Object.keys(d).forEach(t=>{Object.defineProperty(this.prototype,t,{configurable:!0,get(){return this.props[t]},set(e){const s=this.props[t],i=this._propTypes[t];if(e!==s&&(this.props[t]=e,this.render(),this.propChanged(t,s,e)),"object"!=typeof e){const s=r(t);!1===e?this.removeAttribute(s):!0===e?this.setAttribute(s,""):"string"===i&&""===e?this.removeAttribute(s):this.setAttribute(s,e)}}})}),Object.keys(d).map(t=>r(t))}connectedCallback(){Object.keys(this.props).forEach(t=>{this._upradeProperty(t)}),this.render(),this.mounted()}attributeChangedCallback(t,e,s){const i=t.replace(/_/g,(t,e)=>0===e?t:"-").replace(/(?:^\w|[A-Z]|\b\w)/g,(t,e)=>0===e?t.toLowerCase():t.toUpperCase()).replace(n,""),r=this.props[i],h=o(s||this.hasAttribute(t),this._propTypes[i]);r!==h&&(this[i]=h)}render(){const i=this._template(this._html),n=this._html`<style>${this._styles()}</style>${i.string}`;t.merge(this._shadowRoot,n.string),function(t,i){for(const n of e)for(const e of t.querySelectorAll(`[on${n}]`)){const t=e.getAttribute(`on${n}`);e.removeAttribute(`on${n}`);let r=s.find(t=>t.el===e);const o=i[t];if(r){let t=r[n];o.toString()===t.toString()||(e.removeEventListener(n,t),t=o,e.addEventListener(n,t))}else s.push({el:e,[n]:o}),e.addEventListener(n,o)}}(this._shadowRoot,{...n.events,...i.events})}setState(t){const e=this.state;this.state={...e,...t},this.stateChanged({...e},{...this.state}),this.render()}emit(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!1}))}}return p&&customElements.define(c,v),v}}();