import{html,render as lighterRender}from"lighterhtml";export default function Component({tag:t="my-element",mode:e="open",props:s={},shadow:i=!0,autoDefine:r=!0,state:n={},actions:h={},mounted:o=(()=>{}),propChanged:a=(()=>{}),stateChanged:p=(()=>{}),render:c=(()=>{}),styles:d=(()=>"")}){class b extends HTMLElement{constructor(){super(),this.props={...s},this._propTypes={},this._initProps=this._initProps.bind(this),this.propChanged=a.bind(this),this._initProps(),this.state={...n},this.setState=this.setState.bind(this),this.stateChanged=p.bind(this),this._styles=d.bind(this),this.actions={...h},this._initActions=this._initActions.bind(this),this._initActions(),this._engine=html.bind(this),this._html=c.bind(this),this.render=lighterRender.bind(this,i?this.attachShadow({mode:e}):this,this.render),this.mounted=o.bind(this),this.emit=this.emit.bind(this)}_initProps(){Object.keys(this.props).map(t=>{const e=typeOf(this.props[t]);this._propTypes[t]=e;const s=this.getAttribute(t)||this.hasAttribute(t)||this.props[t];this.props[t]=typeCast(s,e)})}_initActions(){Object.keys(this.actions).map(t=>{this.actions[t]=h[t].bind(this)})}_upradeProperty(t){let e=this[t];delete this[t],this[t]=e}static get observedAttributes(){return Object.keys(s).forEach(t=>{Object.defineProperty(this.prototype,t,{configurable:!0,get(){return this.props[t]},set(e){const s=this.props[t],i=this._propTypes[t];if(e!==s&&(this.props[t]=e,this.render(),this.propChanged(t,s,e)),"object"!=typeof e){const s=camelCase(t);!1===e?this.removeAttribute(s):!0===e?this.setAttribute(s,""):"string"===i&&""===e?this.removeAttribute(s):this.setAttribute(s,e)}}})}),Object.keys(s).map(t=>kebabCase(t))}connectedCallback(){Object.keys(this.props).forEach(t=>{this._upradeProperty(t)}),this.render(),this.mounted()}attributeChangedCallback(t,e,s){const i=camelCase(t),r=this.props[i],n=typeCast(s||this.hasAttribute(t),this._propTypes[i]);r!==n&&(this[i]=n)}render(){return this._engine`
        <style>
        ${this._styles()}
        </style>
        ${this._html(this._engine)}
      `}setState(t){const e=this.state;this.state={...e,...t},this.stateChanged({...e},{...this.state}),this.render()}emit(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!1}))}}return r&&customElements.define(t,b),b};function typeCast(t,e){return"boolean"===e?"true"===t||""===t||!0===t:"number"===e?parseInt(t):"string"===e?String(t):t}function typeOf(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}const invalidChars=/[^a-zA-Z0-9:]+/g;function kebabCase(t){return t.replace(/([a-z])([A-Z])/g,t=>t[0]+"-"+t[1]).replace(invalidChars,"-").toLowerCase()}function camelCase(t){return t.replace(/_/g,(t,e)=>0===e?t:"-").replace(/(?:^\w|[A-Z]|\b\w)/g,(t,e)=>0===e?t.toLowerCase():t.toUpperCase()).replace(invalidChars,"")}