var Customel=function(){"use strict";const t={attrs(t){const e={};for(let s=0;s<t.attributes.length;s++){const i=t.attributes[s];e[i.name]=i.value}return e},nodesByKey(t,e){const s={};for(let i=0;i<t.childNodes.length;i++){const n=e(t.childNodes[i]);n&&(s[n]=t.childNodes[i])}return s},merge(t,e,s){if((s=s||{}).key=s.key||(t=>t.id),"string"==typeof e){const s=e;(e=document.createElement(t.tagName)).innerHTML=s}const i={old:this.nodesByKey(t,s.key),new:this.nodesByKey(e,s.key)};let n;for(n=0;e.firstChild;n++){const r=e.removeChild(e.firstChild);if(n>=t.childNodes.length){t.appendChild(r);continue}let o=t.childNodes[n];const h=s.key(r);if(s.key(o)||h){const e=h&&h in i.old?i.old[h]:r;e!==o&&(o=t.insertBefore(e,o))}if(o.nodeType!==r.nodeType||o.tagName!==r.tagName)t.replaceChild(r,o);else if([Node.TEXT_NODE,Node.COMMENT_NODE].indexOf(o.nodeType)>=0){if(o.textContent===r.textContent)continue;o.textContent=r.textContent}else if(o!==r){const t={base:this.attrs(o),new:this.attrs(r)};for(const e in t.base)e in t.new||o.removeAttribute(e);for(const e in t.new)e in t.base&&t.base[e]===t.new[e]||o.setAttribute(e,t.new[e]);this.merge(o,r)}}for(;t.childNodes.length>n;)t.removeChild(t.lastChild)}},e=[];function s(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}const i=/[^a-zA-Z0-9:]+/g;function n(t){return t.replace(/([a-z])([A-Z])/g,t=>t[0]+"-"+t[1]).replace(i,"-").toLowerCase()}function r(t,e){return"boolean"===e?"true"===t||""===t||!0===t:"number"===e?parseInt(t):"string"===e?String(t):t}function o(t,...e){return t.reduce((t,i,n)=>{if(!t.string)return{events:t.events,string:i};const r=e[n-1];if("function"===s(r)){const e=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);return{events:{...t.events,[e]:r},string:t.string+e+i}}if("array"===s(r)){const e=r.reduce((t,e)=>({...t,...e.events}),{}),s=r.reduce((t,e)=>t+e.string,"");return{events:{...t.events,...e},string:t.string+s+i}}return{events:{...t.events},string:t.string+e[n-1]+i}},{events:{},string:null})}return function({mode:h="open",props:a={},state:c={},actions:d={},mounted:p=(()=>{}),propChanged:l=(()=>{}),stateChanged:u=(()=>{}),template:b=(()=>{}),styles:g=(()=>"")}){return class extends HTMLElement{constructor(){super(),this.props={...a},this._propTypes={},this._initProps=this._initProps.bind(this),this.propChanged=l.bind(this),this._initProps(),this.state={...c},this.setState=this.setState.bind(this),this.stateChanged=u.bind(this),this._styles=g.bind(this),this.actions={...d},this._initActions=this._initActions.bind(this),this._initActions(),this._shadowRoot=this.attachShadow({mode:h}),this._html=o.bind(this),this._template=b.bind(this),this.render=this.render.bind(this),this.mounted=p.bind(this),this.emit=this.emit.bind(this)}_initProps(){Object.keys(this.props).map(t=>{const e=s(this.props[t]);this._propTypes[t]=e;const i=this.getAttribute(t)||this.hasAttribute(t)||this.props[t];this.props[t]=r(i,e)})}_initActions(){Object.keys(this.actions).map(t=>{this.actions[t]=d[t].bind(this)})}_upradeProperty(t){let e=this[t];delete this[t],this[t]=e}static get observedAttributes(){return Object.keys(a).forEach(t=>{Object.defineProperty(this.prototype,t,{configurable:!0,get(){return this.props[t]},set(e){const s=this.props[t],i=this._propTypes[t];if(e!==s&&(this.props[t]=e,this.render(),this.propChanged(t,s,e)),"object"!=typeof e){const s=n(t);!1===e?this.removeAttribute(s):!0===e?this.setAttribute(s,""):"string"===i&&""===e?this.removeAttribute(s):this.setAttribute(s,e)}}})}),Object.keys(a).map(t=>n(t))}connectedCallback(){Object.keys(this.props).forEach(t=>{this._upradeProperty(t)}),this.render(),this.mounted()}attributeChangedCallback(t,e,s){const n=t.replace(/_/g,(t,e)=>0===e?t:"-").replace(/(?:^\w|[A-Z]|\b\w)/g,(t,e)=>0===e?t.toLowerCase():t.toUpperCase()).replace(i,""),o=this.props[n],h=r(s||this.hasAttribute(t),this._propTypes[n]);o!==h&&(this[n]=h)}render(){const s=this._template(this._html),i="string"==typeof s?s:s.string,n=this._html`<style>${this._styles()}</style>${i}`;var r,o;t.merge(this._shadowRoot,n.string),r=this._shadowRoot,o={...n.events,...s.events},[...r.querySelectorAll("*")].reduce((t,e)=>{const s=e.getAttributeNames().filter(t=>t.startsWith("on"));return[...t,...s]},[]).forEach(t=>{for(const s of r.querySelectorAll(`[${t}]`)){const i=s.getAttribute(t);s.removeAttribute(t);const n=t.replace("on","");let r=e.find(t=>t.el===s);const h=o[i];if(r){let t=r[n];h.toString()===t.toString()||(s.removeEventListener(n,t),t=h,s.addEventListener(n,t))}else e.push({el:s,[n]:h}),s.addEventListener(n,h)}})}setState(t){const e=this.state;this.state={...e,...t},this.stateChanged({...e},{...this.state}),this.render()}emit(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!1}))}}}}();